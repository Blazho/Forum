<mat-card class="create-post-container">
    <h2 class="title">{{ postId ? 'Edit Post' : 'Create New Post'}}</h2>

    <form [formGroup]="postForm" (ngSubmit)="onSubmit()">

        <!-- Toolbar-->
        <mat-toolbar color="primary" class="toolbar">
            <span>{{ thread?.title }}</span>
            <span>by: {{thread?.createdByUsername}}</span>
        </mat-toolbar>
        
        <!--Html-->
        <mat-form-field appearance="outline" class="field">
            <mat-label>Content</mat-label>
            <textarea matInput
                    placeholder="Enter content" 
                    formControlName="html"
                    rows="10"
                    required
                    
            ></textarea>
            @if (postForm.get('html')?.hasError('required')) {
            <mat-error>
                Content is required
            </mat-error>
            }
        </mat-form-field>

    <!-- Submit -->
    <div class="action-buttons">
      <button mat-raised-button color="primary" type="submit" [disabled]="postForm.invalid || loading">
        {{ postId ? 'Edit Thread' : 'Create Thread'}}
      </button>
      <!-- Cancel -->
      <!-- type="button" prevents submition on the form-->
      <button type="button" mat-button color="primary" (click)="cancel()" >Cancel</button>

    @if (loading) {
    <mat-progress-spinner diameter="24" mode="indeterminate" class="loading-spinner"></mat-progress-spinner>
    }

    </div>
    </form>
</mat-card>

